# ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Stores

- ‚úÖ `stores/friends.js` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–∑—å—è–º–∏
- ‚úÖ `stores/notifications.js` - —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- ‚úÖ `components/molecules/NotificationToast.vue` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ `components/molecules/FriendCard.vue` - –∫–∞—Ä—Ç–æ—á–∫–∞ –¥—Ä—É–≥–∞
- ‚úÖ `components/organisms/NotificationContainer.vue` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ `components/organisms/FriendsList.vue` - —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
- ‚úÖ `components/organisms/AddFriendModal.vue` - –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞
- ‚úÖ `components/organisms/InviteFriendsModal.vue` - –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤ –±–æ–π

### –°—Ç—Ä–∞–Ω–∏—Ü—ã

- ‚úÖ `pages/friends.vue` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥—Ä—É–∑–µ–π
- ‚úÖ `pages/bosses/index.vue` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã)

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –î–æ–±–∞–≤–∏—Ç—å NotificationContainer –≤ app.vue

```vue
<template>
  <div>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <NuxtPage />

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <NotificationContainer />
  </div>
</template>

<script setup>
import NotificationContainer from '~/components/organisms/NotificationContainer.vue';
</script>
```

### 2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Socket.io —Å–ª—É—à–∞—Ç–µ–ª–∏ –¥–ª—è –¥—Ä—É–∑–µ–π

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `plugins/socket-friends.client.js`:

```javascript
import { io } from 'socket.io-client';

export default defineNuxtPlugin(nuxtApp => {
  const config = useRuntimeConfig();
  const authStore = useAuthStore();
  const friendsStore = useFriendsStore();
  const notificationsStore = useNotificationsStore();

  if (!authStore.token) return;

  const socket = io(config.public.wsUrl, {
    auth: {
      token: authStore.token
    }
  });

  // –ó–∞–ø—Ä–æ—Å –≤ –¥—Ä—É–∑—å—è –ø–æ–ª—É—á–µ–Ω
  socket.on('friendRequestReceived', data => {
    friendsStore.addIncomingRequestFromSocket(data);
    notificationsStore.addFriendRequestNotification(data);
  });

  // –ó–∞–ø—Ä–æ—Å –≤ –¥—Ä—É–∑—å—è –ø—Ä–∏–Ω—è—Ç
  socket.on('friendRequestAccepted', data => {
    friendsStore.addFriendFromSocket(data.friend);
    notificationsStore.addFriendAcceptedNotification(data.friend);
  });

  // –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –±–æ–π
  socket.on('bossInvitationReceived', data => {
    notificationsStore.addBossInvitationNotification(data);
  });

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º socket –≤ nuxtApp –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
  nuxtApp.provide('socket', socket);
});
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±–æ—Å—Å–∞

–í `pages/bosses/[id].vue` –¥–æ–±–∞–≤–∏—Ç—å:

```vue
<!-- –í —Å–µ–∫—Ü–∏–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ—Å—Å–µ -->
<button
  v-if="instance?.isOwner && instance?.isPrivate"
  @click="showInviteFriendsModal = true"
  class="btn-primary"
>
  üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π
</button>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<InviteFriendsModal
  v-if="showInviteFriendsModal"
  :instance-id="instanceId"
  @close="showInviteFriendsModal = false"
/>
```

### 4. –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥—Ä—É–∑–µ–π –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

–í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –¥–æ–±–∞–≤–∏—Ç—å:

```vue
<NuxtLink to="/friends" class="nav-link">
  üë• –î—Ä—É–∑—å—è
</NuxtLink>
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∞

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/friends`
2. –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞"
3. –í–≤–µ—Å—Ç–∏ –Ω–∏–∫–Ω–µ–π–º
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
5. –£ –¥—Ä—É–≥–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –±–æ—è

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/bosses`
2. –í—ã–±—Ä–∞—Ç—å –±–æ—Å—Å–∞
3. –û—Ç–º–µ—Ç–∏—Ç—å "–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –±–æ–π"
4. –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å
5. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π"
6. –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–∞
7. –£ –¥—Ä—É–≥–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –±–æ—é

1. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏
3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–æ—è
4. –ù–∞—á–∞—Ç—å –∞—Ç–∞–∫–æ–≤–∞—Ç—å –±–æ—Å—Å–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥—Ä—É–∑—å—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ü—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π –≤ –±–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç
- [ ] –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –±–æ—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –±–æ–∏ –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –¥—Ä—É–∑—å—è–º

## üìö API Endpoints

–°–º. `server/FRIENDS_AND_PRIVATE_INSTANCES_API.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API.

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

_–ü–æ–∫–∞ –Ω–µ—Ç_

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è —Å –≤–∫–ª–∞–¥–∫–æ–π –¥—Ä—É–∑–µ–π
2. –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥—Ä—É–∑—å—è
3. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥—Ä—É–∑–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å—É (–æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω)
4. –î–æ–±–∞–≤–∏—Ç—å –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –¥—Ä—É–∑—å—è–º–∏

---

–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üéâ
