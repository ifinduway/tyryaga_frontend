# –°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –±–æ–µ–≤ —Å –±–æ—Å—Å–∞–º–∏

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∏–≥—Ä–æ–∫–∞–º –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –∫ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º –±–æ—Å—Å–æ–≤ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π –±–æ—Ä—å–±—ã.

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–ì—Ä—É–ø–ø–æ–≤—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã**

- –í–ª–∞–¥–µ–ª–µ—Ü —Å–æ–∑–¥–∞–µ—Ç –∏–Ω—Å—Ç–∞–Ω—Å –±–æ—Å—Å–∞
- –î—Ä—É–≥–∏–µ –∏–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∞–∫—Ç–∏–≤–Ω–æ–º—É –∏–Ω—Å—Ç–∞–Ω—Å—É
- –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–∞–≥—Ä–∞–¥—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞–Ω–µ—Å–µ–Ω–Ω–æ–º—É —É—Ä–æ–Ω—É

### 2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å (–∫–∞–∫ –≤–ª–∞–¥–µ–ª–µ—Ü)
- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—É–∂–æ–º –∏–Ω—Å—Ç–∞–Ω—Å–µ, –µ—Å–ª–∏ —É –Ω–µ–≥–æ –Ω–µ—Ç —Å–≤–æ–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ
- –í–ª–∞–¥–µ–ª–µ—Ü –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Å—Ç–∞–Ω—Å—É —á–µ—Ä–µ–∑ API –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 3. **–í–∏–¥–∏–º–æ—Å—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤**

- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –±–æ–∏ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –±–æ—Å—Å, –≤–ª–∞–¥–µ–ª–µ—Ü, HP, —É—á–∞—Å—Ç–Ω–∏–∫–∏, –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞

## API Endpoints

### `GET /api/boss/instance/active`

–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ (–≤–ª–∞–¥–µ–ª–µ—Ü –ò–õ–ò —É—á–∞—Å—Ç–Ω–∏–∫)

**Response:**

```json
{
  "ok": true,
  "data": {
    "instance": {
      "id": "...",
      "templateName": "–°–º–æ—Ç—Ä—è—â–∏–π",
      "ownerNickname": "Player1",
      "isOwner": false,
      "currentHp": 5000,
      "maxHp": 10000,
      "participants": [...]
    }
  }
}
```

### `GET /api/boss/instance/available`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤

**Query Parameters:**

- `limit` (optional, default: 20) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

**Response:**

```json
{
  "ok": true,
  "data": {
    "instances": [
      {
        "id": "...",
        "templateName": "–°–º–æ—Ç—Ä—è—â–∏–π",
        "ownerNickname": "Player1",
        "ownerLevel": 15,
        "currentHp": 5000,
        "maxHp": 10000,
        "participantCount": 2,
        "expiresAt": "2025-01-15T20:00:00Z"
      }
    ]
  }
}
```

### `POST /api/boss/instance/:id/join`

–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∏–Ω—Å—Ç–∞–Ω—Å—É –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞

**Response:**

```json
{
  "ok": true,
  "data": {
    "message": "–í—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –±–æ—é",
    "instance": {
      "id": "...",
      "templateName": "–°–º–æ—Ç—Ä—è—â–∏–π",
      "ownerName": "Player1",
      "currentHp": 5000,
      "maxHp": 10000
    }
  }
}
```

**Errors:**

- `400` - –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å
- `400` - –ò–Ω—Å—Ç–∞–Ω—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω
- `400` - –≠—Ç–æ –≤–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å
- `400` - –í—ã —É–∂–µ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ –≤ —ç—Ç–æ–º –∏–Ω—Å—Ç–∞–Ω—Å–µ
- `404` - –ò–Ω—Å—Ç–∞–Ω—Å –Ω–µ –Ω–∞–π–¥–µ–Ω

## Socket.io Events

### Server ‚Üí Client

#### `bossInstanceState`

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

```javascript
{
  instanceId: "...",
  templateName: "–°–º–æ—Ç—Ä—è—â–∏–π",
  currentHp: 5000,
  maxHp: 10000,
  ownerId: "...",
  ownerNickname: "Player1",
  isOwner: false,
  participants: [...]
}
```

#### `playerJoined`

–ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –±–æ—é

```javascript
{
  instanceId: "...",
  player: {
    userId: "...",
    nickname: "Player2",
    level: 10
  }
}
```

#### `bossInstanceUpdate`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–∞ (—É—Ä–æ–Ω, HP, —É—á–∞—Å—Ç–Ω–∏–∫–∏)

```javascript
{
  instanceId: "...",
  currentHp: 4500,
  maxHp: 10000,
  damageDealt: 500,
  dealtBy: {
    userId: "...",
    nickname: "Player1"
  },
  participants: [...]
}
```

#### `bossInstanceDefeated`

–ë–æ—Å—Å –ø–æ–±–µ–∂–¥–µ–Ω

```javascript
{
  instanceId: "...",
  bossName: "–°–º–æ—Ç—Ä—è—â–∏–π",
  dealtBy: {
    userId: "...",
    nickname: "Player1"
  },
  rewards: [
    {
      userId: "...",
      nickname: "Player1",
      money: 75000,
      exp: 15000,
      damagePercentage: "60.00"
    },
    {
      userId: "...",
      nickname: "Player2",
      money: 75000,
      exp: 15000,
      damagePercentage: "40.00"
    }
  ]
}
```

### Client ‚Üí Server

#### `joinBossInstance`

–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞ (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)

```javascript
socket.emit('joinBossInstance', { instanceId: '...' });
```

## Frontend UI

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/bosses`

**–î–≤–µ –≤–∫–ª–∞–¥–∫–∏:**

1. **üëπ –°–æ–∑–¥–∞—Ç—å –±–æ–π**
   - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ –±–æ—Å—Å–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å

2. **ü§ù –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è**
   - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –±–æ—Å—Å, –≤–ª–∞–¥–µ–ª–µ—Ü, —É—á–∞—Å—Ç–Ω–∏–∫–∏, HP, –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
   - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/bosses/:id`

**–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**

- –ù–∞–∑–≤–∞–Ω–∏–µ –±–æ—Å—Å–∞ –∏ —É—Ä–æ–≤–µ–Ω—å
- –í–ª–∞–¥–µ–ª—å—Ü–∞ –∏–Ω—Å—Ç–∞–Ω—Å–∞ (üëë –µ—Å–ª–∏ –≤—ã, üë§ –µ—Å–ª–∏ –¥—Ä—É–≥–æ–π –∏–≥—Ä–æ–∫)
- HP –±–∞—Ä —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏
- –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –Ω–∞–Ω–µ—Å–µ–Ω–Ω—ã–º —É—Ä–æ–Ω–æ–º
- –õ–æ–≥ –±–æ—è —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –ö–Ω–æ–ø–∫–∏ –∞—Ç–∞–∫–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –†–µ–∞–ª-—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è HP
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –∏–≥—Ä–æ–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ Socket.io –∫–æ–º–Ω–∞—Ç–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–≤—è–∑–∏

## –õ–æ–≥–∏–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥

**–í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–æ–ª–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–Ω–µ—Å–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–Ω–∞!**

```
–ë–∞–∑–æ–≤–∞—è –Ω–∞–≥—Ä–∞–¥–∞: 1000 –º–æ–Ω–µ—Ç, 100 –æ–ø—ã—Ç–∞

–£—á–∞—Å—Ç–Ω–∏–∫ 1: 60% —É—Ä–æ–Ω–∞
- –ù–∞–≥—Ä–∞–¥–∞: 1000 –º–æ–Ω–µ—Ç
- –û–ø—ã—Ç: 100 –æ–ø—ã—Ç–∞

–£—á–∞—Å—Ç–Ω–∏–∫ 2: 40% —É—Ä–æ–Ω–∞
- –ù–∞–≥—Ä–∞–¥–∞: 1000 –º–æ–Ω–µ—Ç
- –û–ø—ã—Ç: 100 –æ–ø—ã—Ç–∞

–£—á–∞—Å—Ç–Ω–∏–∫ 3: 20% —É—Ä–æ–Ω–∞ (–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –ø–æ–∑–∂–µ)
- –ù–∞–≥—Ä–∞–¥–∞: 1000 –º–æ–Ω–µ—Ç
- –û–ø—ã—Ç: 100 –æ–ø—ã—Ç–∞
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ö–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫, –≤–Ω–µ—Å—à–∏–π —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ –ø–æ–±–µ–¥—É –Ω–∞–¥ –±–æ—Å—Å–æ–º, –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É. –≠—Ç–æ —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω—É—é –∏–≥—Ä—É –∏ –Ω–µ –Ω–∞–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞ –ø–æ–∑–¥–Ω–µ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ –º–µ–Ω—å—à–∏–π —É—Ä–æ–Ω.

## –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –±–æ—é

1. **–ò–≥—Ä–æ–∫ 1** —Å–æ–∑–¥–∞–µ—Ç –∏–Ω—Å—Ç–∞–Ω—Å –±–æ—Å—Å–∞
   - `POST /api/boss/instance/create`
   - –ü–æ–ª—É—á–∞–µ—Ç `instanceId`
   - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/bosses/:instanceId`
   - Socket.io: `joinBossInstance`

2. **–ò–≥—Ä–æ–∫ 2** –≤–∏–¥–∏—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É "ü§ù –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"
   - –í–∏–¥–∏—Ç –∏–Ω—Å—Ç–∞–Ω—Å –∏–≥—Ä–æ–∫–∞ 1
   - –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"
   - `POST /api/boss/instance/:id/join`
   - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/bosses/:instanceId`
   - Socket.io: `joinBossInstance`

3. **–ò–≥—Ä–æ–∫ 1** –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - Socket.io —Å–æ–±—ã—Ç–∏–µ `playerJoined`
   - –í –ª–æ–≥–µ –±–æ—è: "–ò–≥—Ä–æ–∫ 2 –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –±–æ—é!"

4. **–û–±–∞ –∏–≥—Ä–æ–∫–∞ –∞—Ç–∞–∫—É—é—Ç –±–æ—Å—Å–∞**
   - Socket.io: `dealDamage`
   - –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç `bossInstanceUpdate`
   - HP –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

5. **–ë–æ—Å—Å –ø–æ–±–µ–∂–¥–µ–Ω**
   - Socket.io: `bossInstanceDefeated`
   - –ù–∞–≥—Ä–∞–¥—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### Backend

- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `GET /api/boss/instance/active` - –ø–æ–∏—Å–∫ –ø–æ –≤–ª–∞–¥–µ–ª—å—Ü—É –ò–õ–ò —É—á–∞—Å—Ç–Ω–∏–∫—É
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `GET /api/boss/instance/available` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω `POST /api/boss/instance/:id/join` - –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ Socket.io: –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ `playerJoined`
- ‚úÖ Socket.io: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ –≤ `bossInstanceState`

### Frontend

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤–∫–ª–∞–¥–∫–∏ –Ω–∞ `/bosses`: "–°–æ–∑–¥–∞—Ç—å –±–æ–π" –∏ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"
- ‚úÖ –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∏–Ω—Å—Ç–∞–Ω—Å—É
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è `playerJoined`
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –ª–æ–≥–µ –±–æ—è –æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –∏–≥—Ä–æ–∫–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –±–æ—è

```javascript
// 1. –ò–≥—Ä–æ–∫ —Å–æ–∑–¥–∞–µ—Ç –∏–Ω—Å—Ç–∞–Ω—Å
const response = await $fetch('/api/boss/instance/create', {
  method: 'POST',
  body: { templateId: 'boss_template_id' }
});
const instanceId = response.data.instance.id;

// 2. –î—Ä—É–≥–æ–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è
await $fetch(`/api/boss/instance/${instanceId}/join`, {
  method: 'POST'
});
```

### Socket.io –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```javascript
// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞
socket.emit('joinBossInstance', { instanceId });

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞
socket.on('playerJoined', data => {
  console.log(`${data.player.nickname} joined the battle!`);
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π HP
socket.on('bossInstanceUpdate', data => {
  updateHP(data.currentHp);
  updateParticipants(data.participants);
});
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

1. –ò–≥—Ä–æ–∫ 1 —Å–æ–∑–¥–∞–µ—Ç –∏–Ω—Å—Ç–∞–Ω—Å "–°–º–æ—Ç—Ä—è—â–∏–π"
2. –ò–≥—Ä–æ–∫ 2 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"
3. –ò–≥—Ä–æ–∫ 2 –≤–∏–¥–∏—Ç –∏–Ω—Å—Ç–∞–Ω—Å –∏–≥—Ä–æ–∫–∞ 1
4. –ò–≥—Ä–æ–∫ 2 –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è
5. ‚úÖ –û–±–∞ –∏–≥—Ä–æ–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞
6. ‚úÖ –ò–≥—Ä–æ–∫ 1 –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–æ–≤–º–µ—Å—Ç–Ω–∞—è –∞—Ç–∞–∫–∞

1. –û–±–∞ –∏–≥—Ä–æ–∫–∞ –∞—Ç–∞–∫—É—é—Ç –±–æ—Å—Å–∞
2. ‚úÖ HP –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —É –æ–±–æ–∏—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. ‚úÖ –õ–æ–≥ –±–æ—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞—Ç–∞–∫–∏ –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
4. ‚úÖ –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–Ω–µ—Å–µ–Ω–Ω—ã–º —É—Ä–æ–Ω–æ–º

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–±–µ–¥–∞ –∏ –Ω–∞–≥—Ä–∞–¥—ã

1. –ë–æ—Å—Å –ø–æ–±–µ–∂–¥–µ–Ω
2. ‚úÖ –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–æ–ª–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É
3. ‚úÖ –ù–∞–≥—Ä–∞–¥—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –≤—Å–µ—Ö, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —É—Ä–æ–Ω–∞
4. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–≤–∫–ª—é—á–∞—è –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞–Ω–µ—Å–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–Ω–∞)
5. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –±–æ—Å—Å–æ–≤"

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞/—É—á–∞—Å—Ç–Ω–∏–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∏–Ω—Å—Ç–∞–Ω—Å—É
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è ID –∏–Ω—Å—Ç–∞–Ω—Å–∞ –∏ —à–∞–±–ª–æ–Ω–∞
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- ‚úÖ Socket.io –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `ownerId`, `participants.userId`
- ‚úÖ –õ–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ (default: 20)
- ‚úÖ Socket.io –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∏–≥—Ä–æ–∫—É)
- [ ] –ß–∞—Ç –≤–Ω—É—Ç—Ä–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- [ ] –†–µ–π–¥—ã —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (10+)
- [ ] –†–æ–ª–∏ –≤ –≥—Ä—É–ø–ø–µ (—Ç–∞–Ω–∫, –ª–µ–∫–∞—Ä—å, DPS)
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [ ] –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã (—Ç–æ–ª—å–∫–æ –ø–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—é)
